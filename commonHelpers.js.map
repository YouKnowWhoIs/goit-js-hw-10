{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// iziToast - flatpickr\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\n// iziToast - librreary\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst calendar = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nconst daysTime = document.querySelector('[data-days]');\nconst hoursTime = document.querySelector('[data-hours]');\nconst minutesTime = document.querySelector('[data-minutes]');\nconst secondsTime = document.querySelector('[data-seconds]');\n\nstartButton.disabled = true;\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    activeBtn();\n  },\n};\n\nflatpickr(calendar, options, {\n  dateFormat: 'Y-m-d H:i',\n});\n\ncalendar.addEventListener('input', activeBtn);\n\nfunction activeBtn() {\n  const selectedDate = new Date(calendar.value);\n\n  if (selectedDate > new Date()) {\n    startButton.disabled = false;\n    userSelectedDate = selectedDate;\n  } else if (userSelectedDate && selectedDate < userSelectedDate) {\n    startButton.disabled = true;\n    userSelectedDate = null;\n    iziToast.error({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n  } else {\n    userSelectedDate = null;\n    iziToast.error({\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n  }\n}\n\nclass Timer {\n  constructor(tick) {\n    this.intervalId = null;\n    this.tick = tick;\n  }\n\n  start() {\n    const init = userSelectedDate.getTime();\n\n    this.intervalId = setInterval(() => {\n      const diff = userSelectedDate.getTime() - Date.now();\n      if (diff < 0) {\n        clearInterval(this.intervalId);\n        startButton.disabled = true;\n        calendar.disabled = false;\n        return;\n      }\n      const time = this.convertMs(diff);\n      this.tick(time);\n    }, 1000);\n  }\n\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n}\n\nfunction formatTime({ days, hours, minutes, seconds }) {\n  days = days.toString().padStart(2, 0);\n  hours = hours.toString().padStart(2, 0);\n  minutes = minutes.toString().padStart(2, 0);\n  seconds = seconds.toString().padStart(2, 0);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction onTime(time) {\n  const str = formatTime(time);\n  daysTime.textContent = str.days;\n  hoursTime.textContent = str.hours;\n  minutesTime.textContent = str.minutes;\n  secondsTime.textContent = str.seconds;\n}\n\nconst timer = new Timer(onTime);\n\nstartButton.addEventListener('click', () => {\n  console.log('start');\n  calendar.disabled = true;\n  startButton.disabled = true;\n  timer.start();\n});\n"],"names":["calendar","startButton","daysTime","hoursTime","minutesTime","secondsTime","userSelectedDate","options","selectedDates","activeBtn","flatpickr","selectedDate","iziToast","Timer","tick","diff","time","ms","days","hours","minutes","seconds","formatTime","onTime","str","timer"],"mappings":"sGAQA,MAAMA,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3DJ,EAAY,SAAW,GACvB,IAAIK,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClCC,GACD,CACH,EAEAC,EAAUV,EAAUO,CAEnB,EAEDP,EAAS,iBAAiB,QAASS,CAAS,EAE5C,SAASA,GAAY,CACnB,MAAME,EAAe,IAAI,KAAKX,EAAS,KAAK,EAExCW,EAAe,IAAI,MACrBV,EAAY,SAAW,GACvBK,EAAmBK,GACVL,GAAoBK,EAAeL,GAC5CL,EAAY,SAAW,GACvBK,EAAmB,KACnBM,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAChB,CAAK,IAEDN,EAAmB,KACnBM,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAChB,CAAK,EAEL,CAEA,MAAMC,CAAM,CACV,YAAYC,EAAM,CAChB,KAAK,WAAa,KAClB,KAAK,KAAOA,CACb,CAED,OAAQ,CACOR,EAAiB,QAAU,EAExC,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMS,EAAOT,EAAiB,QAAS,EAAG,KAAK,IAAG,EAClD,GAAIS,EAAO,EAAG,CACZ,cAAc,KAAK,UAAU,EAC7Bd,EAAY,SAAW,GACvBD,EAAS,SAAW,GACpB,MACD,CACD,MAAMgB,EAAO,KAAK,UAAUD,CAAI,EAChC,KAAK,KAAKC,CAAI,CACf,EAAE,GAAI,CACR,CAED,UAAUC,EAAI,CAMZ,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACH,CAEA,SAASC,EAAW,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACrD,OAAAH,EAAOA,EAAK,SAAQ,EAAG,SAAS,EAAG,CAAC,EACpCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,CAAC,EACtCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,CAAC,EAC1CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,CAAC,EAEnC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAOP,EAAM,CACpB,MAAMQ,EAAMF,EAAWN,CAAI,EAC3Bd,EAAS,YAAcsB,EAAI,KAC3BrB,EAAU,YAAcqB,EAAI,MAC5BpB,EAAY,YAAcoB,EAAI,QAC9BnB,EAAY,YAAcmB,EAAI,OAChC,CAEA,MAAMC,EAAQ,IAAIZ,EAAMU,CAAM,EAE9BtB,EAAY,iBAAiB,QAAS,IAAM,CAC1C,QAAQ,IAAI,OAAO,EACnBD,EAAS,SAAW,GACpBC,EAAY,SAAW,GACvBwB,EAAM,MAAK,CACb,CAAC"}